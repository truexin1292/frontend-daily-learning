<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <script>
        var xmlhttp;

        function loadXMLDoc(url, func) {
            if (window.XMLHttpRequest) {// IE7+, Firefox, Chrome, Opera, Safari 代码
                xmlhttp = new XMLHttpRequest();
            } else {// IE6, IE5 代码
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = func;
            xmlhttp.open("GET", url, true);
            xmlhttp.send();
        }

        function myFunction() {
            loadXMLDoc(//提示不允许跨域
                "http://www.runoob.com/try/ajax/ajax_info.txt",
                function () {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
                    }
                }
            );
        }

    </script>
</head>
<body>
<div id="myDiv"><h2>使用 AJAX 修改文本内容</h2></div>
<button type="button" onclick="myFunction()">修改内容</button>
<!--<script>-->
<!--var script = document.createElement("script");-->
<!--script.src = "http://www.runoob.com/try/ajax/ajax_info.txt?callback=myFunction";-->
<!--document.body.insertBefore(script, document.body.firstChild);-->
<!--</script>-->
<ul></ul>
<script type="text/javascript">
    var ul = document.getElementsByTagName("ul")[0];

    function createNewsList(jsonstr) {
        for (var i = 0; i < jsonstr.length; i++) {
            var tit = jsonstr[i].title;
            var lis = document.createElement("li");
            ul.appendChild(lis);
            lis.innerHTML = tit;
        }
    }
</script>
<script src="http://127.0.0.1/cors.php?callback=createNewsList"></script>
</body>
</html>
