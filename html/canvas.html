<!--
 * @Project: 
 * @Remark: 
 * @Author: 邹新许
 * @Date: 2021-05-20 18:28:02
 * @LastEditors: 邹新许
 * @LastEditTime: 2021-05-22 10:07:33
 * @FilePath: /frontend-daily-learning/html/canvas.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>canvas</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
    body {
      overflow: hidden;
    }
    #mycanvas {
      border: 1px solid #f00;
    }
  </style>

  <!-- <script type="text/javascript" src="demo.js"></script> -->
</head>

<body>
  <canvas id="mycanvas">
    <span>你的浏览器不支持canvas</span>
  </canvas>
  <script>
    window.onload = function () {
      var mycanvas = document.getElementById('mycanvas')
      console.log('log1:', screen.width, screen.height);
      console.log('log2:', window.innerWidth, window.innerHeight);
      mycanvas.width = window.innerWidth;
      // mycanvas.height = window.innerHeight;
      mycanvas.height = Math.ceil(window.innerWidth * 276 / 350);
      // var h = screen.height - 40;
      // var w = screen.width - 20;
      // var c = document.getElementById("mycanvas");
      // c.setAttribute('width', w);
      // c.setAttribute('height', h);
      console.log('log:', mycanvas.width, mycanvas.height);

      var dpr = 350 / 276;
      // mycanvas.height = window.innerHeight
      // mycanvas.width = res[0].width * dpr
      // mycanvas.height = res[0].height * dpr
      // CANVAS = document.getElementById('mycanvas');
      ctx = mycanvas.getContext('2d');
      ctx.scale(dpr, dpr)
      // ctx.scale(2,2)
      // ctx.scale(3, 3 * 276 / 350)

      // 解决下载来的图片是黑色背景的问题
      // ctx.fillStyle = '#ffffff'
      // ctx.fillRect(0, 0, 200,200)

      var img = new Image();
      img.onload = function () {
        console.log('log:', mycanvas.width, mycanvas.height);
        // ctx.drawImage(img, 0, 0);
        // ctx.drawImage(img, 0, 0, 350, 276);
        ctx.drawImage(img, 0, 0, mycanvas.width, mycanvas.height, 0, 0, mycanvas.width, mycanvas.height);
        // ctx.drawImage(img, 0, 0, 350, 276,0, 0, 350, 276)

        // ctx.save();

        // 绘制文本
        ctx.font = '12px Microsoft YaiHei'
        ctx.fillStyle = '#333'
        ctx.fillText('南京教育局', 20, 50)

        // ctx.restore();

        // 绘制文本
        ctx.font = '12px Microsoft YaiHei'
        ctx.fillStyle = '#333'
        ctx.fillText('2021年05月20日', 200, 220)
      }
      img.src = "./img/bg.png";
    }
  </script>
</body>

</html>