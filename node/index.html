<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>调用json格式接口</title>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<div id="app">

</div>
<script>
    $(function () {
        //todo  yarn express.js 已经实现跨域

        // $.ajax({
        //     url: 'http://127.0.0.1:8888/api',
        //     type: 'get',
        //     success: function (rs) {
        //         console.log('rs:', rs);
        //         $.ajax({
        //             url: 'http://127.0.0.1:8888/api/spot',
        //             type: 'get',
        //             success: function (rs) {
        //                 console.log('rs:', rs);
        //             }
        //         });
        //     }
        // });

        //todo yarn server.js 已经实现跨域

        //TODO 1.原生js 已经实现跨域
        // var script = document.createElement("script");
        // script.src = "http://localhost:3001/?file=test.json&callback=function(response){console.log(response);}";
        // document.body.insertBefore(script, document.body.firstChild);

        //TODO 2.jq 已经实现跨域
        // $.getJSON("http://localhost:3001/?file=test.json&callback=?", function(data){
        //     console.log(data);
        // });

        // $.ajax({
        //     url: 'http://localhost:3001/?file=test.json',
        //     type: 'get',
        //     success: function (rs) {
        //         console.log('test:', rs);
        //     }
        // });

        $.post(
            'http://127.0.0.1:3001/?file=test.json',
            function(ret) {
                console.log('test:', ret);
                document.write(JSON.stringify(ret));
            },
            'jsonp'
        );

        //todo yarn server2.js 已经实现跨域

        // $.ajax({
        //     url: 'http://localhost:3000/?file=test.json',
        //     type: 'get',
        //     success: function (rs) {
        //         console.log('test:', rs);
        //     }
        // });


        //todo 直接调用本地json

        //TODO 1 $.ajax
        // $.ajax({
        //     url: "data/test.json",//json文件位置
        //     type: "GET",//请求方式为get
        //     dataType: "json", //返回数据格式为json
        //     success: function (data) {//请求成功完成后要执行的方法
        //         //each循环 使用$.each方法遍历返回的数据date
        //         $.each(data.data, function (i, item) {
        //             var str = '<div style="background: gray;margin-bottom: 10px;">' +
        //                 'id:' + item.name + '<br/>' + '年龄：' + item.age +
        //                 '</div>';
        //             document.write(str);
        //         })
        //     }
        // })

        //TODO 2 $.getJSON
        // jQuery.getJSON( url [, data ] [, success ] )
        // $.getJSON("data/test.json", "", function (data) {
        //     //each循环 使用$.each方法遍历返回的数据date
        //     $.each(data.data, function (i, item) {
        //         var str = '<div style="background: gray;margin-bottom: 10px;">' +
        //             'id:' + item.name + '<br/>' + '年龄：' + item.age +
        //             '</div>';
        //         document.write(str);
        //     })
        // });

    })

</script>
</body>
</html>
